<button #field class="daff-select__field"
  (click)="toggle($event)"
  [disabled]="disabled"
  [tabindex]="tabIndex"
  [attr.aria-expanded]="isOpen"
  (keydown.enter)="toggle($event)"
  (keydown.space)="toggle($event)">
  <ng-container *ngIf="!value">
    <ng-content select="label[daffFormLabel]"></ng-content>
  </ng-container>
  <div *ngIf="value">
    <ng-container
      [ngTemplateOutlet]="optionTemplate?.templateRef"
      [ngTemplateOutletContext]="{option: value}"><div></div>
    </ng-container>
  </div>
  <fa-icon daffSuffix [icon]="faChevronDown"></fa-icon>
</button>
<ng-template cdkPortal #optionsTemplate="cdkPortal">
  <div class="daff-select__options" [@openSelect]="animationState" (@openSelect.done)="animationFinished()">
    <div class="daff-select__option" [class.selected]="value === option"
      *ngFor="let option of options; trackBy:trackByIndex"
      (click)="optionSelected(option)">
      <ng-container
        [ngTemplateOutlet]="optionTemplate?.templateRef"
        [ngTemplateOutletContext]="{
          isSelected: value === option,
          option
        }">
      </ng-container>
    </div>
  </div>
</ng-template>
<ng-content select="daff-error-message"></ng-content>
